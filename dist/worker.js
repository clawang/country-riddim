(()=>{"use strict";function t(t,e,n){for(let s=0;s<n.length;s++)t.setUint8(e+s,n.charCodeAt(s))}const e="/country-riddim/vendor/";Object.assign(globalThis,{Mp3LameEncoderConfig:{memoryInitializerPrefixURL:e,TOTAL_MEMORY:1073741824}}),importScripts(`${e}Mp3LameEncoder.min.js`);const n={wav:({channels:e,sampleRate:n})=>{const s=function(e,n,s){const i=new ArrayBuffer(44+2*e.length),o=new DataView(i);return t(o,0,"RIFF"),o.setUint32(4,32+2*e.length,!0),t(o,8,"WAVE"),t(o,12,"fmt "),o.setUint32(16,16,!0),o.setUint16(20,1,!0),o.setUint16(22,n,!0),o.setUint32(24,s,!0),o.setUint32(28,s*(2*n),!0),o.setUint16(32,2*n,!0),o.setUint16(34,16,!0),t(o,36,"data"),o.setUint32(40,2*e.length,!0),function(t,e,n){for(let s=0;s<n.length;s++,e+=2){let i=n[s];i<0?(i<-1&&(i=-1),i*=32768):(i>1&&(i=1),i*=32767),t.setInt16(e,i,!0)}}(o,44,e),o}(function(t){if(1===t.length)return t[0];const e=t[0],n=t[1],s=e.length+n.length,i=new Float32Array(s);let o=0,a=0;for(;o<s;)i[o++]=e[a],i[o++]=n[a],a++;return i}(e),e.length,n);return new Blob([s],{type:"audio/wav"})},mp3:({channels:t,sampleRate:e})=>{const n=new globalThis.Mp3LameEncoder(e,192);return n.encode(t),n.finish()}};globalThis.addEventListener("message",(t=>{const{type:e,id:s,audioData:i}=t.data;let o;try{const t=n[e];if(!t)throw new Error("Unkown audio encoding");o={id:s,success:!0,data:t(i)}}catch(t){o={id:s,success:!1,message:t.toString()}}postMessage(o)}))})();